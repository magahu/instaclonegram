{% extends 'base.html' %}
{% load static %}

{% block css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/posts/comments.css' %}">
{% endblock %}

{% block title %}
<title>{{post.title}} - @{{post.user.username}}</title>
{% endblock %}

{% block content %}
<div class="container">

    <div class="content">
        <img src="{{post.picture.url}}" width="500px" class="post-img">
    
        <div class="second-row">
    
        <a href="{% url 'users:profile' post.user.username %}" style="text-decoration: none; color: black;">
                <div class="user-data">
                    <div class="user">
                        {% if post.user.profile.picture %}
                            <img src="{{post.user.profile.picture.url}}" width="35px" class="profile-pic">
                        {% else %}
                            <img src="{% static 'images/default-profile.png' %}" width="35px" class="profile-pic">
                        {% endif %}

                        <p class="comment-text"><strong>{{post.user.username}}</strong></p>
                    </div>

                </div>
                
            </a>

            
            <div class="comments">
                <div class="comment-body">
                    <div class="user">
                        <a href="{% url 'users:profile' post.user.username %}" style="text-decoration: none;">
                            {% if post.user.profile.picture %}
                            <img src="{{post.user.profile.picture.url}}" width="35px" class="profile-pic">
                            {% else %}
                            <img src="{% static 'images/default-profile.png' %}" width="35px" class="profile-pic">
                            {% endif %}  
                        </a>
                        <p class="comment-text"><strong>@{{post.user.username}}</strong> {{post.description}}</p> 
                    </div>

                    <div class="comment-options">
                        <p class="comment-date"><strong>{{post.posted}}</strong></p>
                        <p class="comment-date"><strong>Responder</strong></p>
                    </div>

                </div>

                
                {% for comment in post.comment_set.all %}
                <div class="comment">
                    <div class="comment-body">
                        <div class="user">
                            <a href="{% url 'users:profile' comment.user.username %}">
                                {% if comment.user.profile.picture %}
                                    <img src="{{comment.user.profile.picture.url}}" width="35px" class="profile-pic">
                                {% else %}
                                    {% load static %}
                                    <img src="{% static 'images/default-profile.png' %}" width="35px" class="profile-pic">
                                {% endif %}
                            </a>
    
                            <p class="comment-text"><strong>@{{comment.user.username}}</strong> {{comment.text}}</p>
                
                        </div>
                   
                        <div class="comment-options">
                            <p class="comment-date"><strong>{{comment.timestamp}}</strong></p>
                            <p class="comment-date"><strong>Responder</strong></p>
                        </div>

                    </div>  
                    
                    <img src="{% static 'images/gray-heart.png' %}" width="20px" style="margin: 5px;">
                        
                </div>     
                {% endfor %}
            
                  
            </div>
    
            <div class="icons">
                <div class="left-icons">
                    {% include 'posts/like_button.html' %}
                    <a href="#comment">
                        <img class="pic-icon" src="{% static 'images/add_comment.png' %}" height="25px">
                    </a>
                </div>
    
                {% include 'posts/save_post_form.html' %}
    
            </div>

            <a href="{% url 'posts:show-likes' post.pk %}" style="text-decoration: none; color: black;">
                <p class="info-pic-likes"><strong>{{post.like_set.count}} Me gusta</strong></p>
            </a>
            
            {%include 'posts/comment_form.html'%}
    
        </div>
        
    </div>

</div>
{% endblock %}
    